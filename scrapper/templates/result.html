{% extends "base.html" %}
{% load static %}

{% block content %}
<h1 class="text-center mt-5 text-light fw-bold fs-1">{{ message }}</h1>
<div class="container-result mt-5 shadow-sm ">
    <div class="scroll-container">

        {% for data in data_list %}
        <h2 class="fw-bold">Data for {{ data.Molecula }}</h2>
        <p class="lh-lg">
            <b>Estructure IMG:</b> Coming Soon<br>
            <b>Synonyms:</b> {{ data.Synonyms }}<br>
            <b>Molecular Formula:</b> {{ data.Molecular_Formula }}<br>
            <b>Molecular Weight:</b> {{ data.Molecular_Weight }}<br>
            <b>Canonical SMILES:</b> {{ data.Canonical_SMILES }}<br>
            <b>Isomeric SMILES:</b> {{ data.Isomeric_SMILES }}<br>
            <b>InChI:</b> {{ data.InChI }}<br>
            <b>InChIKey:</b> {{ data.InChIKey }}<br>
            <b>IUPAC:</b> {{ data.IUPAC }}<br>
            <b>XLogP:</b> {{ data.XLogP }}<br>
            {% comment %} <b>Linpiski violations:</b> {{ data.Linpiski_violations }}<br> {% endcomment %}
            <b>Exact Mass:</b> {{ data.Exact_Mass }}<br>
            <b>Monoisotopic Mass:</b> {{ data.Monoisotopic_Mass }}<br>
            <b>TPSA:</b> {{ data.TPSA }}<br>
            <b>H-bond Acceptors:</b> {{ data.Hbond_Acceptors }}<br>
            <b>H-bond Donnors:</b> {{ data.Hbond_Donors }}<br>
            <b>Rotatable bonds:</b> {{ data.Rotatable_Bonds }}<br>
        </p>
        <hr>
        {% endfor %}
    </div>
</div>

<div class="text-center mt-5 mb-3 text-light">
    <h4>Download Option</h4>
</div>

<form class="d-flex justify-content-center align-items-center" method="POST" action="{% url 'download_file' %}">
    {% csrf_token %}

    <div class="col col-md-3">
        <select class="form-select mb-3 bg-dark text-light" id="download_type" name="download_type" aria-label="Large select example">
            <option value="" selected disabled>Choose your format</option>
            <option value="pdf">PDF</option>
            <option value="csv">CSV</option>
            <option value="json">JSON (recommended)</option>
          </select>
    </div>

    <div class="btn-custom-d-wrapper mb-3 ms-3">
        <button class="btn  btn-custom-d" type="submit">Download</button>
        <div class="btn-custom-d-bg "></div>
    </div>
    
</form>

{% if error_message %}
    <div style="color: #ff2d2d;" class="text-center  mt-3 mb-3">{{ error_message }}</div>
{% endif %}

<div class="d-flex justify-content-center align-items-center mb-5">
    <a class="" href="/">
        <button class="mt-3 btn btn-dark" style="margin:auto">Go Back</button>
    </a>
</div>
{% endblock %}